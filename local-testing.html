<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Test accorddion</title>
        <script>
            if (!globalThis.Cypress) {
                window.editorVersion = '2.30'
                document.writeln(
                    `<script onload="window.dispatchEvent(new CustomEvent('loadded-editorjs-script'));" src="https://cdn.jsdelivr.net/npm/@editorjs/editorjs@${window.editorVersion}"><\/script>`,
                )
            } else {
            }
        </script>
        <!-- <script
            src="https://code.jquery.com/jquery-3.7.1.slim.min.js"
            integrity="sha256-kmHvs0B+OpCW5GVHUNjv9rOmY0IvSIRcf7zGUDTDQM8="
            crossorigin="anonymous"
        ></script> -->
        <script src="
https://cdn.jsdelivr.net/npm/@editorjs/header@2.8.7/dist/header.umd.min.js
"></script>
        <script src="
https://cdn.jsdelivr.net/npm/@editorjs/list@1.10.0/dist/list.umd.min.js
"></script>
        <script src="
https://cdn.jsdelivr.net/npm/@editorjs/table@2.4.5/dist/table.umd.min.js
"></script>
        <script src="./dist/dev-build.js"></script>
        <style>
            /* .ce-block__content::before {
                content: '';
                width: 20px;
                display: block;
                height: 1.6em;
                right: 100%;
                top: 50%;
                position: absolute;
                transform: translate(0px, -50%);
            } */
        </style>
    </head>
    <body style="display: flex; height: 100vh; max-height: 100vh; flex-direction: column; gap: 10px; overflow: hidden">
        <button id="toggle" style="padding: 12px">Toggle readonly</button>
        <div id="editor" style="background-color: antiquewhite; overflow-y: scroll; flex: 1"></div>
        <script>
            const dataLocation = 'editorjs-accordion-data'
            let data = {}
            try {
                data = JSON.parse(localStorage.getItem(dataLocation))
            } catch {}
            let readOnly = false

            const version = window.editorVersion
            const AccordionBlock = self.AccordionBlock

            const styles = {
                /**
                 * Rules applied to .ce-block[data-readonly] .accordion-wrapper
                 */
                blockWrapper: undefined,
                /**
                 * Rules applied to .ce-block__content when the editor is readonly
                 */
                //  full selector: '.ce-block[data-readonly]:where(> .ce-block__content, + .ce-block .ce-block__content , + .ce-block + .ce-block .ce-block__content...)`
                // blockContent: 'background-color:green;',
                /**
                 * Rules applied to the last block content
                 */
                // lastBlockContent: 'background-color: lightblue;',
                /**
                 * Rules applied to the inside content of the block, like paragraphs, headings, lists, etc.
                 * explanatory selector: '.ce-block__content > *'
                 */
                insideContent: '',
            }
            const editor = new EditorJS({
                holder: 'editor',
                tools: {
                    list: {
                        class: self.List,
                    },
                    header: {
                        class: self.Header,
                    },
                    table: {
                        class: self.Table,
                    },
                    accordion: {
                        class: AccordionBlock,
                        config: {
                            styles,
                        },
                    },
                },
                readOnly,
                onChange(api, changedBlocks) {
                    api.saver.save().then((data) => {
                        console.log('ðŸš€ ~ onChange ~ data:', data)
                        localStorage.setItem(dataLocation, JSON.stringify(data))
                    })
                },
                data,
            })
            window.editor = editor

            editor.isReady.then(() => {
                document.getElementById('toggle').addEventListener('click', () => {
                    readOnly = !readOnly
                    editor.readOnly.toggle()
                })
            })
        </script>
    </body>
</html>
